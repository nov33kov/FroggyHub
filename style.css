/* Base */
:root {
  --dark: #0c3b26;
  --dark-2: #0f4a31;
  --text: #103c23;
  --muted: #3e7053;
  --water1: #bfe9ff;
  --water2: #e9f8ff;
  --shore: #93c47d;
  --soil: #6b4f3b;
  --lily: #8fd48d;
  --lily-dark: #63b36c;
  --bubble: #e8fbe8;
  --bubble-bd: #bfe8c5;
  --brick: #0e5e38;
  --brick-bd: #0a4a2d;
  --brick-tx: #e8ffe9;
  --border: #cfe3d6;
  --shadow: 0 14px 34px rgba(20, 80, 40, 0.12);
}
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  margin: 0;
  font:
    16px/1.5 ui-sans-serif,
    system-ui,
    -apple-system,
    Inter,
    Segoe UI,
    Roboto,
    Arial;
  overflow: auto;
  transition:
    background 0.35s ease,
    color 0.35s ease;
}

/* Layout */
/* Сцены */
body.scene-intro {
  background: radial-gradient(120% 120% at 50% 30%, var(--dark-2), var(--dark));
  color: #eafff2;
}
body.scene-pond {
  background:
    radial-gradient(
        120% 80% at 50% 22%,
        var(--water1),
        var(--water2) 55%,
        transparent 56%
      )
      no-repeat,
    linear-gradient(
        180deg,
        var(--soil) 0 12%,
        var(--shore) 12% 18%,
        transparent 18%
      )
      top/100% 22vh,
    linear-gradient(
        0deg,
        var(--soil) 0 12%,
        var(--shore) 12% 18%,
        transparent 18%
      )
      bottom/100% 22vh,
    radial-gradient(90% 60% at 0% 50%, var(--shore) 0 18%, transparent 19%)
      left/22vw 100%,
    radial-gradient(90% 60% at 100% 50%, var(--shore) 0 18%, transparent 19%)
      right/22vw 100%,
    linear-gradient(180deg, var(--water2), var(--water1));
  background-attachment: fixed, scroll, scroll, scroll, scroll, fixed;
  color: var(--text);
}
body.scene-final {
  background: radial-gradient(120% 120% at 50% 30%, var(--dark-2), var(--dark));
  color: #eafff2;
}

/* Fade контейнер */
.wrap {
  display: grid;
  grid-template-rows: 48vh auto;
  min-height: 100vh;
  transition: opacity 0.45s ease;
}
.wrap.fading {
  opacity: 0;
}
body.scene-intro .wrap,
body.scene-final .wrap {
  grid-template-rows: 100vh 0;
}

/* Верхняя сцена */
.pond {
  position: relative;
}
.pads {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
/* в интро/финале кувшинки прячем полностью */
body.scene-intro .pads,
body.scene-final .pads {
  display: none;
}

.pad {
  position: absolute;
  width: 120px;
  height: 120px;
  transform: translate(-50%, -50%);
  background: radial-gradient(
    40% 40% at 30% 30%,
    var(--lily) 0 60%,
    var(--lily-dark) 100%
  );
  border-radius: 50%;
  box-shadow:
    0 12px 0 rgba(0, 0, 0, 0.06),
    0 0 0 8px rgba(255, 255, 255, 0.35) inset;
}

.ripples {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.18;
}
.ripples:before,
.ripples:after {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 70vmin;
  height: 70vmin;
  border-radius: 50%;
  border: 8px solid #fff;
  transform: translate(-50%, -50%);
  animation: ripple 7s linear infinite;
}
.ripples:after {
  animation-delay: 3.5s;
}
@keyframes ripple {
  0% {
    transform: translate(-50%, -50%) scale(0.7);
    opacity: 0.25;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 0;
  }
}

/* Пень — показываем только в intro/final */
.stump {
  display: none;
  position: absolute;
  left: 50%;
  top: 56%;
  transform: translate(-50%, -50%);
  max-width: 60vmin;
  height: auto;
  pointer-events: none;
}
body.scene-intro .stump,
body.scene-final .stump {
  display: block;
}

/* Лягушка */
#frog {
  position: absolute;
  left: 50%;
  top: 42%;
  transform: translate(-50%, -50%);
  transition:
    left 0.45s ease,
    top 0.45s ease,
    transform 0.2s ease;
}
/* в пруду лягушка прыгает по кувшинкам ниже, тут положение вычисляется JS */
body.scene-pond #frog {
  top: 50%;
}
#frog.turn-left {
  transform: translate(-50%, -50%) scaleX(-1);
}
#frog.jump {
  animation: jump 0.55s ease;
}
@keyframes jump {
  0% {
    transform: translate(-50%, -50%);
  }
  35% {
    transform: translate(-50%, -85%);
  }
  100% {
    transform: translate(-50%, -50%);
  }
}

/* Чистый PNG без подложки/рамки/скругления */
#frog img {
  width: 140px;
  height: auto;
  display: block;
  image-rendering: auto;
  background: transparent;
  border: none;
  padding: 0;
  border-radius: 0;
}

/* Components */
/* Реплики/кнопки */
.speech {
  position: absolute;
  left: 50%;
  top: 72%;
  transform: translate(-50%, 0);
  max-width: min(760px, 92vw);
  background: rgba(255, 255, 255, 0.12);
  border: 2px solid rgba(255, 255, 255, 0.35);
  border-radius: 18px;
  padding: 14px 18px;
  color: #eafff2;
  backdrop-filter: blur(2px) saturate(130%);
  box-shadow: 0 10px 0 rgba(0, 0, 0, 0.12);
}
.speech strong {
  color: #fff;
}
.speech .actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 10px;
}
body.scene-pond .speech {
  display: none;
}

.pill {
  flex: 1;
  min-width: 220px;
  padding: 14px 16px;
  font-weight: 900;
  cursor: pointer;
  border: none;
  border-radius: 999px;
  background: linear-gradient(180deg, #6ad27f, #3db565);
  color: #092c19;
  box-shadow: 0 14px 0 rgba(0, 0, 0, 0.12);
}
.pill.secondary {
  background: linear-gradient(180deg, #ffd973, #f0b429);
  color: #3b2a00;
}

/* Нижняя панель */
.panel {
  position: relative;
  padding: 22px;
  margin: 18px 5vw 40px;
  border-radius: 22px;
  background: var(--bubble);
  border: 1px solid var(--bubble-bd);
  box-shadow: var(--shadow);
}
body.scene-intro .panel,
body.scene-final .panel {
  display: none;
}

.bubble {
  background: var(--bubble);
  border: 1px solid var(--bubble-bd);
  border-radius: 16px;
  padding: 12px;
  margin-bottom: 12px;
}
.bubble-head {
  font-weight: 800;
  color: #1c6b3f;
  margin-bottom: 4px;
}
.grid {
  display: grid;
  gap: 12px;
}
.row2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.brick input,
.brick textarea {
  width: 100%;
  background: var(--brick);
  color: var(--brick-tx);
  border: 1px solid var(--brick-bd);
  border-radius: 14px;
  padding: 12px 14px;
  box-shadow:
    0 0 0 3px rgba(26, 122, 77, 0.18) inset,
    0 10px 20px rgba(8, 60, 36, 0.22) inset;
}
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  background: linear-gradient(180deg, #58c47a, #2ea85f);
  color: #fff;
  cursor: pointer;
}
.btn.ghost {
  background: #eaffef;
  color: #1b6c3e;
  border: 1px solid #bde3c7;
}
.btn.maybe {
  background: linear-gradient(180deg, #ffd26a, #f0b429);
}
.btn.no {
  background: linear-gradient(180deg, #ff8e8e, #ff6b6b);
}
.btn-group {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.bar-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 10px;
}

/* Вишлист сетка 5×5 + скролл */
.wl-wrap {
  max-height: 50vh;
  overflow: auto;
  padding-right: 6px;
}
.gridVar {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  background: rgba(255, 255, 255, 0.68);
  border-radius: 14px;
  padding: 10px;
  border: 1px solid var(--border);
}
.cell {
  aspect-ratio: 1/1;
  border-radius: 16px;
  cursor: pointer;
  position: relative;
  background: radial-gradient(
    45% 45% at 30% 28%,
    var(--lily) 0 60%,
    var(--lily-dark) 100%
  );
  box-shadow:
    0 12px 0 rgba(0, 0, 0, 0.05),
    0 0 0 6px rgba(255, 255, 255, 0.35) inset;
  display: grid;
  place-items: center;
  color: #0b3b22;
}
.cell .label {
  font-weight: 900;
  text-align: center;
  padding: 8px 6px;
  font-size: 0.9rem;
}
.cell .status {
  position: absolute;
  top: 8px;
  left: 8px;
  font-size: 0.75rem;
  font-weight: 800;
  padding: 4px 8px;
  border-radius: 999px;
  color: #06301b;
  background: #fff9;
}
.cell.taken {
  filter: saturate(60%) brightness(0.9);
}
.cell .action {
  position: absolute;
  bottom: 8px;
  left: 8px;
  right: 8px;
  display: flex;
  justify-content: center;
}
.cell a {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 12px;
  background: #fff;
  border: 1px solid #cde8d5;
  text-decoration: none;
  font-weight: 700;
  font-size: 0.82rem;
}

/* Админ/гость */
.giftcard {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 10px;
  display: grid;
  gap: 8px;
}
.giftcard .meta {
  font-size: 0.85rem;
  color: var(--muted);
}
.gift-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.pill-mini {
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 800;
  border: none;
  cursor: pointer;
}
.choose {
  background: #2ea85f;
  color: #fff;
}
.unchoose {
  background: #ff6b6b;
  color: #fff;
}
.takenTag {
  background: #ededed;
  color: #666;
}

dialog {
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: var(--shadow);
}
.editor label {
  display: grid;
  gap: 6px;
  margin: 6px 0;
}
menu {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin: 10px 0 0 0;
  padding: 0;
}

.list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}
.list li {
  background: var(--bubble);
  border: 1px solid var(--bubble-bd);
  border-radius: 12px;
  padding: 10px 12px;
}
.stats {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}
.stat {
  background: linear-gradient(180deg, #eaffef, #d7f5e1);
  border: 1px solid #bfe8c5;
  border-radius: 14px;
  padding: 10px 12px;
  min-width: 120px;
  text-align: center;
}
.num {
  font-weight: 900;
  font-size: 1.5rem;
}
.code-box {
  font-size: 2rem;
  font-weight: 900;
  background: #eaffef;
  border: 1px solid #bde3c7;
  display: inline-block;
  padding: 10px 18px;
  border-radius: 12px;
  margin-top: 8px;
}
